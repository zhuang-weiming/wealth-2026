<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Investment Portfolio - HSBC RM Dashboard</title>

  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="./css/hsbc.css" rel="stylesheet" />
  <link href="./css/investment.css" rel="stylesheet" />
</head>

<body class="">

  <!-- header section start-->
  <div class="header__shell">
    <header class="header fixed" role="banner">
      <div class="header__content">
        <a href="./index.html" class="logo empty" aria-label="Go to home page" title="Home">
          <img src="./assets/hsbc-logo-200x25.svg?la=en-GB&amp;h=25&amp;hash=EFB19274CD17649AE659D3351B595180"
            alt="HSBC logo" height="25">
        </a>
        <button type="button" class="nav__button" aria-expanded="false" aria-controls="nav__wrapper">
          <span class="hsbc-menu" aria-hidden="true"></span>
          <span class="sr-only">Menu</span>
        </button>

        <nav role="navigation" aria-label="Main Navigation" class="nav__wrapper" data-nav="wrapper" id="nav__wrapper">
          <ul class="nav font-size-smaller" data-nav="nav" itemscope=""
            itemtype="http://www.schema.org/SiteNavigationElement">

            <li class="nav__item" itemprop="name" content="Opportunity">
              <!-- data-href added to allow navigation without changing button styles -->
              <button class="nav__link" itemprop="url" aria-expanded="false" aria-current="true"
                data-href="./rm_opportunity.html">
                <span>Opportunity</span>
                <span class="hsbc-right-chevron" aria-hidden="true"></span>
              </button>

            </li>
            <li class="nav__item" itemprop="name" content="Planning">
              <button class="nav__link" itemprop="url" aria-expanded="true" aria-current="true"
                data-href="./rm_planning.html">
                <span>Planning</span>
                <span class="hsbc-right-chevron" aria-hidden="true"></span>
              </button>
            </li>
            <li class="nav__item nav__item--current" itemprop="name" content="Investment">
              <button class="nav__link" itemprop="url" aria-expanded="false" aria-current="true"
                data-href="./rm_investment.html">
                <span>Investment</span>
                <span class="hsbc-right-chevron" aria-hidden="true"></span>
              </button>
            </li>
            <li class="nav__item" itemprop="name" content="Performance">
              <button class="nav__link" itemprop="url" aria-expanded="true" aria-current="true"
                data-href="./rm_performance.html">
                <span>Performance</span>
                <span class="hsbc-right-chevron" aria-hidden="true"></span>
              </button>
            </li>
          </ul>
        </nav>
        </nav>

        <!-- navigation behavior: wire buttons with data-href to perform navigation
        without changing visual styles. -->
        <script src="./scripts/nav-links.js?v=1.0.0"></script>

      </div>
    </header>
  </div>
  <!-- header section end -->
  <!-- banner start -->
  <div class="sublayout full-bleed-sublayout crop-400">
    <div class="hero-banner" data-component="HeroBanner">
      <div
        class="hero-banner__inner-container hero-banner--size-large hero-banner--background-dark-grey hero-banner--dark-block-opacity-40">
        <div class="hero-banner__media-container ">

          <div class="image-with-links">
            <div class="image-with-links__image-container">
              <picture>
                <source media="(max-width:768px)" srcset="./assets/investing-in-hsbc-768x432.jpg">
                <source srcset="./assets/investing-in-hsbc-1600x400.jpg">
                <img src="./assets/investing-in-hsbc-1600x400.jpg"
                  class="image-with-links__image image-with-links__image--without-media-info no-zoom" alt=""
                  style="width: auto">
              </picture>

            </div>
          </div>
        </div>
        <div class="hero-banner--alignment-left">
          <div class="hero-banner-fluid">
            <div class="container-fluid">
              <div class="hero-banner__body">
                <div class="row">
                  <div class="hero-banner__responsive-body">
                    <div class="hero-banner__content-container">
                      <div class="hero-banner__content">
                        <h1 class="h5 hero-banner__category">Focus on critical market movements and product risks.
                        </h1>
                        <p class="hero-banner__title h1">Al-Native Investment Monitoring</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- banner end -->
  <div class="flex-1 overflow-y-auto bg-[#f6f6f6]">
    <main class="max-w-[1400px] mx-auto p-6 pb-32">
      <!-- <div class="mb-8">
        <h1 class="text-3xl font-light text-[#2d2d2d] mb-2">Investment Overview</h1>
        <p class="text-gray-600 text-sm">Monitor critical market movements, portfolio risks, and compliance
          alerts.</p>
      </div> -->
      <div id="copilot-alert-card"
        class="bg-white border-l-[6px] border-[#db0011] shadow-sm p-6 pt-0 pb-10 mb-8 flex flex-col md:flex-row gap-6 items-start">
        <!-- <div class="text-[#db0011] text-3xl pt-1">
          <i class="fa-solid fa-triangle-exclamation"></i>
        </div> -->
        <div>
          <div class="flex items-center gap-3 mb-2">
            <!-- <span class="uppercase tracking-wide">Action
              Required</span> -->
            <h3 class="text-xl font-medium text-[#2d2d2d]">Compliance Risk: SFDR Article 9 Violation</h3>
          </div>
          <p>
            Two new ESG reports flag excessive carbon exposure in 4 currently-approved funds. Immediate
            Product Vetting review is required to maintain SFDR Article 9 classification.
          </p>
          <div class="flex gap-3">
            <button
              onclick="sendActionToAgent('Review Flagged Funds for Article 9 Compliance in Product Vetting Queue')"
              class="btn-primary px-5 py-2">
              Review Compliance
            </button>
            <button onclick="sendActionToAgent('View ESG Report Summary')" class="btn-primary px-5 py-2">
              View Report Summary
            </button>
          </div>
        </div>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

        <div class="hsbc-card lg:col-span-2">
          <div class="hsbc-header-border pb-3 mb-5 flex justify-between items-center">
            <h3 class="text-lg font-medium text-[#2d2d2d]">Rebalancing Review Queue</h3>
            <span class="text-xs text-gray-500">AI Prioritized</span>
          </div>

          <div class="space-y-4">
            <div
              class="border border-gray-200 hover:border-gray-400 transition-colors p-4 bg-white group cursor-pointer">
              <div class="flex justify-between items-start mb-2">
                <div class="flex items-center gap-3">
                  <div class="w-2 h-2 rounded-full bg-[#db0011]"></div>
                  <span class="font-bold text-[#2d2d2d] text-base">Jennifer Wu</span>
                  <span class="text-xs bg-gray-100 text-gray-600 px-2 py-0.5 border border-gray-300">Premier</span>
                </div>
                <button onclick="showAdviceDetail('jennifer')"
                  class="text-sm text-[#db0011] font-medium hover:underline">View Details <i
                    class="fa-solid fa-chevron-right text-xs ml-1"></i></button>
              </div>
              <div class="pl-5 text-sm text-gray-600 grid grid-cols-2 gap-4">
                <div>
                  <span class="block text-xs text-gray-400 uppercase">Trigger</span>
                  <span class="text-[#db0011] font-medium"><i class="fa-solid fa-arrow-trend-down"></i> SVB Crisis
                    Exposure (65%)</span>
                </div>
                <div>
                  <span class="block text-xs text-gray-400 uppercase">Total AUM</span>
                  <span class="font-medium">$300,000</span>
                </div>
              </div>
            </div>

            <div
              class="border border-gray-200 hover:border-gray-400 transition-colors p-4 bg-white group cursor-pointer">
              <div class="flex justify-between items-start mb-2">
                <div class="flex items-center gap-3">
                  <div class="w-2 h-2 rounded-full bg-yellow-500"></div>
                  <span class="font-bold text-[#2d2d2d] text-base">Michael Chen</span>
                </div>
                <button onclick="showAdviceDetail('michael')"
                  class="text-sm text-[#db0011] font-medium hover:underline">View Details <i
                    class="fa-solid fa-chevron-right text-xs ml-1"></i></button>
              </div>
              <div class="pl-5 text-sm text-gray-600 grid grid-cols-2 gap-4">
                <div>
                  <span class="block text-xs text-gray-400 uppercase">Trigger</span>
                  <span class="text-yellow-600 font-medium">Fed Rate Hike Impact</span>
                </div>
                <div>
                  <span class="block text-xs text-gray-400 uppercase">Total AUM</span>
                  <span class="font-medium">$500,000</span>
                </div>
              </div>
            </div>

            <div
              class="border border-gray-200 hover:border-gray-400 transition-colors p-4 bg-white group cursor-pointer">
              <div class="flex justify-between items-start mb-2">
                <div class="flex items-center gap-3">
                  <div class="w-2 h-2 rounded-full bg-green-500"></div>
                  <span class="font-bold text-[#2d2d2d] text-base">Sarah Lee</span>
                </div>
                <button onclick="showAdviceDetail('sarah')"
                  class="text-sm text-[#db0011] font-medium hover:underline">View Details <i
                    class="fa-solid fa-chevron-right text-xs ml-1"></i></button>
              </div>
              <div class="pl-5 text-sm text-gray-600 grid grid-cols-2 gap-4">
                <div>
                  <span class="block text-xs text-gray-400 uppercase">Trigger</span>
                  <span class="text-green-700 font-medium">Gold Allocation Opp</span>
                </div>
                <div>
                  <span class="block text-xs text-gray-400 uppercase">Total AUM</span>
                  <span class="font-medium">$200,000</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="space-y-6">
          <div class="hsbc-card">
            <div class="hsbc-header-border pb-3 mb-4">
              <h3 class="text-lg font-medium text-[#2d2d2d]">Market Insights</h3>
            </div>
            <div class="space-y-4">
              <div class="pb-3 border-b border-gray-100 last:border-0">
                <p class="font-bold text-sm text-[#2d2d2d] mb-1">Clean Energy Outperformance</p>
                <p class="text-xs text-gray-600 mb-2">iShares Global Clean Energy ETF > MSCI World by
                  1.5% YTD.</p>
                <a href="#" class="text-xs text-[#db0011] hover:underline">Read Analysis &rarr;</a>
              </div>
              <div class="pb-3 border-b border-gray-100 last:border-0">
                <p class="font-bold text-sm text-[#2d2d2d] mb-1">FOMC Minutes Review</p>
                <p class="text-xs text-gray-600 mb-2">"Higher for longer" rates confirmed. Strategy
                  meeting at 11:30.</p>
                <a href="#" class="text-xs text-[#db0011] hover:underline">View Minutes &rarr;</a>
              </div>
            </div>
          </div>

          <div class="hsbc-card bg-gray-50 border-gray-200">
            <div class="hsbc-header-border pb-3 mb-4 flex justify-between">
              <h3 class="text-lg font-medium text-[#2d2d2d]">Product Vetting</h3>
              <span class="bg-[#2d2d2d] text-white text-xs px-2 py-1 rounded-full">3 Pending</span>
            </div>
            <ul class="space-y-3">
              <li class="flex justify-between items-center text-sm">
                <span class="text-[#db0011] font-medium"><i class="fa-solid fa-circle-exclamation mr-2"></i>SFDR
                  Audit</span>
                <span class="text-xs font-bold text-[#db0011]">Due Today</span>
              </li>
              <li class="flex justify-between items-center text-sm">
                <span class="text-gray-700"><i class="fa-solid fa-plus mr-2"></i>Russell 2000
                  Growth</span>
                <span class="text-xs text-gray-500">3 days</span>
              </li>
              <li class="flex justify-between items-center text-sm">
                <span class="text-gray-700"><i class="fa-solid fa-rotate mr-2"></i>JPM EM Bond
                  Rebal</span>
                <span class="text-xs text-gray-500">7 days</span>
              </li>
            </ul>
          </div>
        </div>

      </div>

      <div id="advice-detail-panel" style="display: none;"
        class="mt-8 bg-white border border-gray-300 shadow-lg animate-fade-in-up">

        <div class="bg-[#333] text-white p-6 flex justify-between items-center">
          <h2 class="text-xl font-light">Advice Details: Portfolio Rebalancing</h2>
          <button onclick="hideAdviceDetail()" class="text-gray-400 hover:text-white text-xl"><i
              class="fa-solid fa-xmark"></i></button>
        </div>

        <div class="p-8">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8 pb-8 border-b border-gray-200">
            <div>
              <span class="block text-xs text-gray-500 uppercase tracking-wider mb-1">Client Name</span>
              <span class="text-lg font-bold text-[#2d2d2d]">Jennifer Wu</span>
            </div>
            <div>
              <span class="block text-xs text-gray-500 uppercase tracking-wider mb-1">Status</span>
              <span class="text-lg text-[#2d2d2d]">Premier Customer</span>
            </div>
            <div>
              <span class="block text-xs text-gray-500 uppercase tracking-wider mb-1">Portfolio
                Value</span>
              <span class="text-lg font-mono text-[#2d2d2d]">$300,000.00</span>
            </div>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
            <div class="lg:col-span-2 space-y-6">
              <div class="bg-red-50 border-l-4 border-[#db0011] p-4">
                <h4 class="text-[#db0011] font-bold text-sm mb-2">TRIGGER EVENT</h4>
                <p class="text-sm text-gray-800">SVB collapse contributed to a 60% decline in tech
                  stocks. Portfolio risk exposure exceeded limit (65%). Immediate rebalancing
                  recommended.</p>
              </div>

              <div>
                <h4 class="font-bold text-[#2d2d2d] mb-4">Proposed Allocation Changes</h4>
                <table class="w-full text-sm border-collapse">
                  <thead>
                    <tr class="bg-gray-100 text-left border-b border-gray-300">
                      <th class="p-3 font-semibold text-gray-600">Asset</th>
                      <th class="p-3 font-semibold text-gray-600 text-right">Current</th>
                      <th class="p-3 font-semibold text-gray-600 text-right">Proposed</th>
                      <th class="p-3 font-semibold text-gray-600 text-right">Delta</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="border-b border-gray-200">
                      <td class="p-3">QQQ (Tech ETF)</td>
                      <td class="p-3 text-right text-gray-500">$200,000 (65%)</td>
                      <td class="p-3 text-right font-bold text-[#2d2d2d]">$100,000 (35%)</td>
                      <td class="p-3 text-right text-[#db0011] font-bold">- $100,000</td>
                    </tr>
                    <tr class="border-b border-gray-200">
                      <td class="p-3">TLT (Treasury Bond)</td>
                      <td class="p-3 text-right text-gray-500">$50,000 (15%)</td>
                      <td class="p-3 text-right font-bold text-[#2d2d2d]">$150,000 (50%)</td>
                      <td class="p-3 text-right text-green-700 font-bold">+ $100,000</td>
                    </tr>
                    <tr>
                      <td class="p-3">Cash</td>
                      <td class="p-3 text-right text-gray-500">$50,000 (20%)</td>
                      <td class="p-3 text-right font-bold text-[#2d2d2d]">$50,000 (15%)</td>
                      <td class="p-3 text-right text-gray-400">-</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <div class="space-y-6">
              <div class="bg-gray-50 p-5 border border-gray-200">
                <h4 class="font-bold text-[#2d2d2d] text-sm mb-3 border-b border-gray-300 pb-2">
                  PROJECTED IMPACT</h4>
                <div class="mb-4">
                  <span class="block text-xs text-gray-500">Risk Reduction</span>
                  <span class="text-2xl font-bold text-green-700">-30%</span>
                </div>
                <div>
                  <span class="block text-xs text-gray-500">Est. Loss Avoided</span>
                  <span class="text-2xl font-bold text-[#2d2d2d]">$30,000</span>
                </div>
              </div>

              <div class="p-5 border border-green-200 bg-green-50/50">
                <h4 class="font-bold text-green-800 text-sm mb-2"><i class="fa-solid fa-shield-check mr-2"></i>
                  COMPLIANCE PASS</h4>
                <ul class="text-xs text-green-900 space-y-1">
                  <li>• Within Risk Profile (Moderate-Aggressive)</li>
                  <li>• HK SFC Regulation Compliant</li>
                  <li>• No Concentration Limits Breached</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="flex flex-col sm:flex-row justify-end gap-4 pt-6 border-t border-gray-200">
            <button onclick="hideAdviceDetail()" class="hsbc-btn-secondary px-6 py-3 font-bold text-sm">Reject /
              Discuss</button>
            <button onclick="modifyRebalancing()" class="hsbc-btn-secondary px-6 py-3 font-bold text-sm">Modify
              Parameters</button>
            <button onclick="approveRebalancing()" class="hsbc-btn-primary px-8 py-3 font-bold text-sm shadow-md">
              Approve & Notify Client
            </button>
          </div>
        </div>
      </div>

    </main>
  </div>

  <button id="copilot-trigger" onclick="toggleCopilot()"
    class="fixed bottom-6 right-6 z-40 bg-[#2d2d2d] text-white w-14 h-14 shadow-2xl flex items-center justify-center text-2xl hover:bg-[#db0011] transition-colors duration-300">
    <i class="fa-solid fa-robot"></i>
  </button>

  <aside id="copilot-widget" class="copilot-widget flex flex-col">
    <div class="bg-[#2d2d2d] text-white p-4 flex justify-between items-center shrink-0">
      <h3 class="font-bold flex items-center gap-2"><i class="fa-solid fa-robot"></i> Investment Assistant</h3>
      <button onclick="toggleCopilot()" class="text-gray-400 hover:text-white"><i
          class="fa-solid fa-minus"></i></button>
    </div>

    <div id="chat-container" class="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50">
      <div class="flex gap-3 chat-bubble-in">
        <div class="w-8 h-8 bg-[#db0011] text-white flex items-center justify-center text-xs shrink-0">HSBC
        </div>
        <div class="bg-white border border-gray-200 p-3 text-sm text-[#2d2d2d] shadow-sm max-w-[85%]">
          <p>Welcome. A critical risk (SFDR) is flagged. What is your next action?</p>
        </div>
      </div>

      <div class="flex flex-wrap gap-2 pl-11">
        <button onclick="sendActionToAgent('Confirm Analyst Meeting')"
          class="text-xs border border-gray-300 bg-white px-3 py-1 hover:bg-[#db0011] hover:text-white hover:border-[#db0011] transition-colors">Confirm
          Meeting</button>
        <button onclick="sendActionToAgent('Generate Vetting Report')"
          class="text-xs border border-gray-300 bg-white px-3 py-1 hover:bg-[#db0011] hover:text-white hover:border-[#db0011] transition-colors">Generate
          Report</button>
      </div>
    </div>

    <div class="p-3 bg-white border-t border-gray-200 flex gap-2">
      <input type="text" id="copilot-input" placeholder="Ask AI..."
        class="flex-1 bg-gray-100 border-0 px-3 py-2 text-sm focus:ring-1 focus:ring-[#db0011] focus:outline-none"
        onkeypress="if(event.key === 'Enter') handleCopilotInput()">
      <button onclick="handleCopilotInput()"
        class="bg-[#2d2d2d] text-white w-10 h-10 hover:bg-[#db0011] transition-colors">
        <i class="fa-solid fa-paper-plane text-xs"></i>
      </button>
    </div>
  </aside>

  <script>
    function sendActionToAgent(action) {
      sendChatMessage(action, true);

      // Simulate AI response
      setTimeout(() => {
        let botResp = `Confirmed: Task initiated for **${action}**. Results will appear shortly.`;
        if (action.includes('ESG Report Summary') || action.includes('Report')) {
          botResp = `**Top 3 Findings:**<br>1. **Renewables:** Funds >30% solar/wind exposure beat MSCI World (+1.5% YTD).<br>2. **Carbon Risk:** 2 reports flag excessive carbon in 4 funds.<br>3. **Compliance:** European ESG funds show higher regulation alignment.`;
        }
        sendChatMessage(botResp, false);
      }, 800);
    }

    function sendChatMessage(message, isUser = true) {
      const chatContainer = document.getElementById('chat-container');
      const newChat = document.createElement('div');

      // Styling differentiation
      if (isUser) {
        newChat.className = `flex gap-3 chat-bubble-in justify-end`;
        newChat.innerHTML = `
            <div class="bg-[#2d2d2d] text-white p-3 text-sm shadow-sm max-w-[85%]">
                ${message}
            </div>
            <div class="w-8 h-8 bg-gray-400 text-white flex items-center justify-center text-xs shrink-0"><i class="fa-solid fa-user"></i></div>
        `;
      } else {
        newChat.className = `flex gap-3 chat-bubble-in`;
        newChat.innerHTML = `
            <div class="w-8 h-8 bg-[#db0011] text-white flex items-center justify-center text-xs shrink-0">HSBC</div>
            <div class="bg-white border border-gray-200 p-3 text-sm text-[#2d2d2d] shadow-sm max-w-[85%]">
                ${message}
            </div>
        `;
      }

      chatContainer.appendChild(newChat);
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    function handleCopilotInput() {
      const input = document.getElementById('copilot-input');
      if (input.value.trim() !== '') {
        const message = input.value.trim();
        sendChatMessage(message, true);

        setTimeout(() => {
          sendChatMessage(`Search initiated for: **${message}**. Analyzing portfolio data...`, false);
        }, 800);

        input.value = '';
      }
    }

    function toggleCopilot() {
      const widget = document.getElementById('copilot-widget');
      const trigger = document.getElementById('copilot-trigger');
      widget.classList.toggle('active');

      if (widget.classList.contains('active')) {
        trigger.style.transform = 'scale(0)';
        setTimeout(() => {
          const input = document.getElementById('copilot-input');
          if (input) input.focus();
        }, 100);
      } else {
        trigger.style.transform = 'scale(1)';
      }
    }

    function showAdviceDetail(clientId) {
      const panel = document.getElementById('advice-detail-panel');
      panel.style.display = 'block';
      panel.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function hideAdviceDetail() {
      document.getElementById('advice-detail-panel').style.display = 'none';
    }

    function approveRebalancing() {
      const viewCustomer = confirm('✅ Advice Approved\n\nClient Jennifer Wu will be notified.\nTrade execution scheduled.\n\nView Customer Notification preview?');
      localStorage.setItem('rebalancing_status', 'approved');
      document.getElementById('advice-detail-panel').style.display = 'none';

      if (viewCustomer) {
        // window.location.href = 'customer_lockscreen.html'; // kept logic
        console.log("Redirecting to customer view...");
      }
    }

    function modifyRebalancing() {
      alert('Modify function: Loading Investment Officer adjustment matrix...');
    }
  </script>
</body>

</html>