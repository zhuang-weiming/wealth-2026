<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Native Wealth - Dashboard (HSBC Style)</title>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="./css/hsbc.css" rel="stylesheet" />
  <link href="./css/common.css" rel="stylesheet" />
  <link href="./css/chatbot.css" rel="stylesheet" />
  <link href="./css/customer.css" rel="stylesheet" />
</head>

<body class="bg-gray-100">

  <div class="app-frame">
    <header class="bg-white border-b border-gray-200 sticky top-0 z-20">
      <div class="px-5 py-4 flex justify-between items-center">
        <div class="flex gap-3 items-center">
          <a href="./index.html" aria-label="Go to home page" title="Home">
            <img src="./assets/hsbc-logo-200x25.svg" alt="HSBC logo" width="90px">
          </a>
          <strong>Wealth AI</strong>
        </div>

        <div class="flex gap-5 text-gray-600">
          <i class="far fa-bell cursor-pointer hover:text-red-700"></i>
          <i class="far fa-user cursor-pointer hover:text-red-700"></i>
        </div>
      </div>

      <div class="px-5 pb-6 pt-2 bg-hsbc-gray border-b border-gray-200">
        <p class="text-gray-600  mb-1">Total Assets (USD)</p>
        <strong class="text-gray-900" style="font-size: 4rem;">
          $1,245,800.00
        </strong>
        <div class="mt-2 flex items-center gap-2">
          <span class="bg-success text-success px-2 py-0.5"> +$3,420 (0.28%)</span>
          <span class=" text-gray-500">Last updated: Today</span>
        </div>
      </div>
    </header>

    <main class="flex-1 overflow-y-auto bg-gray-50">
      <div class="px-5 pt-6 pb-24">
        <section class="mb-8">
          <h4 class="mb-4 border-l-4 border-[#da0011] pl-3 text-gray-900">Today's Market News (2025.11.26)</h4>
          <div class="hsbc-card p-4 border-gray-400 cursor-pointer">
            <div class="flex justify-between items-start mb-2">
              <strong class="text-gray-800 pr-4">Fed Suggests Possible Stop of Balance Sheet Reduction in Early
                2026</strong>
              <span class="text-gray-400 whitespace-nowrap">07:00 AM</span>
            </div>

            <div class="flex gap-3 mt-3">
              <!-- <div class="w-1 bg-[#da0011] shrink-0"></div> -->
              <div class="bg-danger p-4">
                <div class="text-danger uppercase mb-1 tracking-wider">AI Summary</div>
                <p class="text-gray-700 leading-relaxed">
                  This development is favorable for long-term bond allocations. Conversely, it may precipitate a
                  short-term correction in technology growth equities, such as those represented by the QQQ ETF.
                </p>
              </div>
            </div>
          </div>

          <div class="hsbc-card p-4 hover:border-gray-400 transition-colors cursor-pointer">
            <div class="flex justify-between items-start mb-2">
              <strong class="text-gray-800">Tech Sector Earnings Season Ends, VIX Rises</strong>
              <span class="text-gray-400 flex-[0_0_70px]">07:15 AM</span>
            </div>
            <p>Although most companies exceeded earnings expectations, guidance was weak.</p>
            <div class="flex items-start gap-2 mt-2">
              <i class="fas fa-exclamation-circle text-warning mt-0.5"></i>
              <p class="text-warning">Your technology equity allocation is currently elevated at 42%, exceeding the
                recommended threshold for risk diversification.</p>
            </div>
          </div>
        </section>

        <section class="mb-6">
          <h4 class="mb-4 border-l-4 border-[#da0011] pl-3 text-gray-900">AI Investment Advice</h4>

          <div class="hsbc-card hsbc-accent-top shadow-sm">

            <div class="p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50">
              <div class="flex items-center gap-2">
                <!-- <span class="w-6 h-6 bg-black text-white flex items-center justify-center  font-bold">AI</span> -->
                <strong class="text-gray-800">Real-time Optimization based on volatility and macro data</strong>
              </div>
              <span class="text-success bg-success">92% Recommendation</span>
            </div>

            <div class="p-5">
              <strong class="text-gray-600 mb-5 leading-relaxed">
                Decision Basis (Transparency)
              </strong>
              <p class="text-gray-500">In light of elevated volatility in technology equities and rising Treasury
                yields, it is prudent to
                realize gains on select technology positions and reallocate to defensive fixed-income securities to
                optimize portfolio risk-return profile.</p>

              <div class="mb-6">
                <strong class="block text-gray-500 uppercase mb-2">Select Strategy (Control)</strong>

                <div class="strategy-group">
                  <button onclick="setStrategy('defensive')" id="btn-defensive" class="strategy-btn">Defensive</button>
                  <button onclick="setStrategy('balanced')" id="btn-balanced"
                    class="strategy-btn active">Balanced<br>(Recommended)</br></button>
                  <button onclick="setStrategy('aggressive')" id="btn-aggressive"
                    class="strategy-btn">Aggressive</button>
                </div>
              </div>

              <div class="border border-gray-200 mb-6 bg-white">
                <div class="flex items-center p-3 border-b border-gray-100">
                  <div class="w-8 text-center text-red-600 "><i class="fas fa-arrow-down"></i></div>
                  <div class="flex-1">
                    <div class=" text-gray-500">Sell</div>
                    <strong>QQQ (Tech ETF)</strong>
                  </div>
                  <div class="text-right font-bold text-gray-900" id="sell-amount">$50,000</div>
                </div>
                <div class="flex items-center p-3 bg-gray-50">
                  <div class="w-8 text-center text-green-700 "><i class="fas fa-arrow-up"></i></div>
                  <div class="flex-1">
                    <div class=" text-gray-500">Buy</div>
                    <strong>TLT (Treasury)</strong>
                  </div>
                  <div class="text-right font-bold text-gray-900" id="buy-amount">$50,000</div>
                </div>
              </div>

              <button onclick="executeRebalancing()" class="w-full btn btn-primary">
                Execute Rebalancing
              </button>
              <p class="mt-3 text-[10px] text-gray-400 text-center">
                Clicking represents your agreement to the AI Auto Trading Service Terms
              </p>
            </div>
          </div>
        </section>

      </div>
    </main>

    <nav
      class="absolute bottom-0 left-0 right-0 bg-white border-t border-gray-300 px-6 pb-6 pt-3 flex justify-between items-end z-30"
      style="display: flex;">
      <a href="customer_portfolio.html" class="flex flex-col items-center gap-1 group w-16">
        <i class="fas fa-home text-gray-800"></i>
        <span class="text-[12px] text-gray-900">Home</span>
      </a>
      <a href="customer_portfolio.html" class="flex flex-col items-center gap-1 group w-16 opacity-60 hover:opacity-100">
        <i class="fas fa-chart-pie text-gray-800"></i>
        <span class="text-[12px] text-gray-800">Portfolio</span>
      </a>
      <div href="#" class="flex flex-col items-center gap-1 group w-16 cursor-default">
        <i class="fas fa-magic text-primary"></i>
        <span class="text-[12px] text-primary">Advisor</span>
        <div class="h-0.5 w-6 primary mb-1"></div>
      </div>
      <a href="customer_lockscreen.html" class="flex flex-col items-center gap-1 group w-16 opacity-60 hover:opacity-100">
        <div class="h-0.5 w-6 bg-transparent mb-1"></div>
        <i class="far fa-newspaper text-gray-800"></i>
        <span class="text-[12px] text-gray-800">News</span>
      </a>
      <a href="#" class="flex flex-col items-center gap-1 group w-16 opacity-60 hover:opacity-100">
        <div class="h-0.5 w-6 bg-transparent mb-1"></div>
        <i class="fas fa-bars text-gray-800"></i>
        <span class="text-[12px] text-gray-800">Setting</span>
      </a>
    </nav>

    <button id="copilot-trigger" onclick="toggleCopilot()"
      class="fixed bottom-6 right-6 z-40 bg-[#cccccc] text-white w-14 h-14 shadow-2xl flex items-center justify-center text-2xl hover:bg-[#db0011] transition-colors duration-300">
      <i class="fa-solid fa-robot"></i>
    </button>

    <aside id="copilot-widget" class="copilot-widget flex flex-col space-between" style="display: flex;">
      <div class="bg-[#2d2d2d] text-white p-4 flex justify-between items-center shrink-0">
        <h3 class="font-bold flex items-center gap-2"><i class="fa-solid fa-robot"></i> Investment Assistant</h3>
        <button onclick="toggleCopilot()" class="text-gray-400 hover:text-white"><i
            class="fa-solid fa-minus"></i></button>
      </div>

      <div id="chat-container" class="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50">
        <div class="flex gap-3 chat-bubble-in">
          <div class="bg-primary text-white flex items-center justify-center shrink-0">HSBC
          </div>
          <div class="bg-white border border-gray-200 p-3 text-[#2d2d2d] shadow-sm max-w-[85%]">
            <p>Welcome. A critical risk (SFDR) is flagged. What is your next action?</p>
          </div>
        </div>

        <div class="flex flex-wrap gap-2 pl-11 justify-end">
          <button onclick="sendActionToAgent('Confirm Analyst Meeting')"
            class="text-xs border border-gray-300 bg-white px-3 py-1 transition-colors">Confirm
            Meeting</button>
          <button onclick="sendActionToAgent('Generate Vetting Report')"
            class="text-xs border border-gray-300 bg-white px-3 py-1 transition-colors">Generate
            Report</button>
        </div>
      </div>

      <div class="p-3 bg-white border-t flex border-gray-200 gap-2">
        <input type="text" id="copilot-input" placeholder="Ask AI..."
          class="flex-1 bg-gray-100 border-0 px-3 py-2 focus:ring-1 focus:ring-[#db0011] focus:outline-none"
          onkeypress="if(event.key === 'Enter') handleCopilotInput()">
        <button onclick="handleCopilotInput()" class="btn btn-info">
          <i class="fa-solid fa-paper-plane"></i>
        </button>
      </div>
    </aside>
  </div>
  <script src="./scripts/chatbot.js?v=1.0.0"></script>

  <script>
    // Logic remains mostly the same, just updating classes where necessary
    function setStrategy(type) {
      // Reset all buttons
      document.querySelectorAll('.strategy-btn').forEach(btn => {
        btn.classList.remove('active');
      });

      // Activate clicked button
      const activeBtn = document.getElementById('btn-' + type);
      activeBtn.classList.add('active');

      // Update values
      const sellAmount = document.getElementById('sell-amount');
      const buyAmount = document.getElementById('buy-amount');

      if (type === 'defensive') {
        updateValues(sellAmount, "$80,000");
        updateValues(buyAmount, "$80,000");
      } else if (type === 'balanced') {
        updateValues(sellAmount, "$50,000");
        updateValues(buyAmount, "$50,000");
      } else if (type === 'aggressive') {
        updateValues(sellAmount, "$15,000");
        updateValues(buyAmount, "$15,000");
      }
    }

    function updateValues(element, value) {
      element.style.opacity = '0.2';
      setTimeout(() => {
        element.innerText = value;
        element.style.opacity = '1';
      }, 200);
    }

    function executeRebalancing() {
      if (confirm('Please confirm that you wish to execute the rebalancing order as described.')) {
        window.location.href = 'customer_portfolio.html';
      }
    }

    // Copilot widget logic (toggleCopilot, handleCopilotChat) is now loaded from `copilot_widget.html`.
  </script>
</body>

</html>