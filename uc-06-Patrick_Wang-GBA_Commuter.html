<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ±‡ä¸° AI åŠ©æ‰‹ï¼šå¤§æ¹¾åŒºç†è´¢é€š (Patrick Wang)</title>
    <style>
        /* --- æ ¸å¿ƒè§†è§‰å˜é‡ (HSBC Theme) --- */
        :root {
            --hsbc-red: #db0011;
            --hsbc-black: #2d2d2d;
            --hsbc-gray: #5A5A5A;
            --hsbc-light-gray: #f2f2f7; /* iOS Background */
            --white: #ffffff;
            --text-primary: #000000;
            --text-secondary: #8e8e93;
            --accent-green: #008a3c;
            --bubble-user: #db0011;
            --bubble-ai: #ffffff;
        }

        body {
            margin: 0; padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "PingFang SC", "Segoe UI", Roboto, sans-serif;
            background-color: #1e1e1e;
            color: #cccccc;
            height: 100vh;
            display: flex;
            overflow: hidden;
        }

        /* --- å·¦ä¾§ï¼šå‰§æœ¬ä¸åå° (Governance View) --- */
        .story-panel {
            width: 55%;
            padding: 40px;
            border-right: 1px solid #333;
            overflow-y: auto;
            background: #1e1e1e;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .header-title {
            font-size: 1.4rem; color: #fff; 
            border-bottom: 2px solid var(--hsbc-red); padding-bottom: 15px; margin-bottom: 10px;
            display: flex; justify-content: space-between; align-items: center;
        }
        .header-badge { font-size: 0.7rem; background: #333; padding: 4px 8px; border-radius: 4px; color: #c6a87c; border: 1px solid #c6a87c; letter-spacing: 1px;}

        .scene-card {
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid #444;
            padding: 20px;
            border-radius: 8px;
            opacity: 0.3; transform: translateX(-10px);
            transition: all 0.5s ease;
        }

        .scene-card.active {
            opacity: 1; border-left-color: var(--hsbc-red);
            background: linear-gradient(90deg, rgba(219, 0, 17, 0.08) 0%, transparent 100%);
            transform: translateX(0);
        }

        .scene-header { font-size: 0.75rem; color: #888; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 5px; }
        .scene-title { font-size: 1.1rem; font-weight: 600; color: #fff; margin-bottom: 8px; }
        .scene-desc { font-size: 0.9rem; color: #bbb; line-height: 1.5; margin-bottom: 10px; }

        .system-log {
            font-family: 'SF Mono', 'Menlo', monospace;
            font-size: 0.75rem; background: #111; padding: 12px;
            border-radius: 6px; border: 1px solid #333; color: #aaa;
            line-height: 1.4;
        }
        .term-val { color: var(--accent-green); }
        .term-alert { color: #ff9f0a; }

        /* --- å³ä¾§ï¼šæ‰‹æœºæ¨¡æ‹Ÿå™¨ (User View) --- */
        .device-stage {
            width: 45%;
            background: #e5e5e5;
            display: flex; justify-content: center; align-items: center;
            position: relative;
        }

        .phone-frame {
            width: 375px; height: 812px;
            background: var(--hsbc-light-gray); border-radius: 45px;
            border: 10px solid #2d2d2d; 
            position: relative; 
            overflow: hidden;
            box-shadow: 0 40px 80px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
        }
        
        /* 1. çŠ¶æ€æ  */
        .status-bar { 
            height: 44px; flex-shrink: 0;
            display: flex; justify-content: space-between; padding: 0 20px; align-items: flex-end; padding-bottom: 8px; 
            font-size: 12px; font-weight: 600; color: #000; 
            background: rgba(255,255,255,0.95); z-index: 100;
        }
        .notch { position: absolute; top: 0; left: 50%; transform: translateX(-50%); width: 160px; height: 30px; background: #2d2d2d; border-radius: 0 0 18px 18px; z-index: 101; }

        /* 2. å¤´éƒ¨ */
        .chat-header {
            height: 50px; flex-shrink: 0;
            background: rgba(255,255,255,0.95); border-bottom: 1px solid #e5e5e5;
            display: flex; align-items: center; padding: 0 15px; z-index: 90;
        }
        .header-title-box { flex: 1; text-align: center; }
        .ht-main { font-size: 16px; font-weight: 600; color: #000; }
        .ht-sub { font-size: 11px; color: var(--accent-green); display: flex; align-items: center; justify-content: center; gap: 4px; }
        .dot { width: 6px; height: 6px; background: var(--accent-green); border-radius: 50%; }

        /* 3. èŠå¤©åŒºåŸŸ */
        .chat-body {
            flex: 1; 
            overflow-y: auto; 
            padding: 15px; 
            display: flex; flex-direction: column; gap: 16px; 
            background: var(--hsbc-light-gray);
            padding-bottom: 20px; 
        }

        /* æ¶ˆæ¯æ°”æ³¡ */
        .bubble-row { display: flex; width: 100%; margin-bottom: 4px; opacity: 0; animation: fadeUp 0.3s ease-out forwards; }
        .bubble-row.user { justify-content: flex-end; }
        .bubble-row.ai { justify-content: flex-start; }
        
        .avatar { width: 32px; height: 32px; border-radius: 50%; background: #fff; border: 1px solid #eee; display: flex; align-items: center; justify-content: center; margin-right: 8px; flex-shrink: 0; }
        .avatar img { width: 20px; }

        .bubble {
            max-width: 78%; padding: 12px 16px; font-size: 15px; line-height: 1.5;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08); position: relative;
        }
        .bubble.ai { 
            background: #ffffff; color: #000; 
            border-radius: 18px 18px 18px 4px; 
        }
        .bubble.user { 
            background: var(--hsbc-red); color: #fff; /* ç”¨æˆ·æ”¹ä¸ºçº¢è‰²èƒŒæ™¯ */
            border-radius: 18px 18px 4px 18px; 
        }

        /* 4. åº•éƒ¨è¾“å…¥æ  */
        .input-area {
            flex-shrink: 0;
            background: #f9f9f9; border-top: 1px solid #e5e5e5;
            padding: 12px 15px 30px 15px; 
            display: flex; align-items: center; gap: 10px; box-sizing: border-box;
            position: relative; z-index: 100;
        }
        
        /* RM Button */
        .rm-btn {
            width: 36px; height: 36px; border-radius: 50%; overflow: hidden; border: 2px solid #fff; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); cursor: pointer; position: relative; flex-shrink: 0;
        }
        .rm-btn img { width: 100%; height: 100%; object-fit: cover; }
        .rm-badge {
            position: absolute; bottom: 0; right: 0; width: 10px; height: 10px; 
            background: var(--accent-green); border: 2px solid #fff; border-radius: 50%;
        }

        .input-field {
            flex: 1; height: 36px; border-radius: 18px; border: 1px solid #ddd; background: #fff;
            padding: 0 15px; font-size: 14px; color: #333; display: flex; align-items: center;
        }
        .mic-icon { color: #999; font-size: 18px; flex-shrink: 0; }

        /* --- ç®€åŒ–åçš„å¡ç‰‡è®¾è®¡ (Simplified Native UI) --- */
        
        /* é€šç”¨å¡ç‰‡å®¹å™¨ */
        .native-card {
            background: #fff; border-radius: 10px; overflow: hidden; width: 100%; box-sizing: border-box;
            border: 1px solid #e0e0e0; margin-top: 8px;
        }

        /* åˆ—è¡¨é¡¹ (List Item) */
        .card-list-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 12px 16px; border-bottom: 1px solid #f0f0f0;
        }
        .card-list-item:last-child { border-bottom: none; }
        
        .list-main { display: flex; flex-direction: column; }
        .list-title { font-size: 14px; font-weight: 500; color: #000; }
        .list-sub { font-size: 12px; color: #8e8e93; margin-top: 2px; }
        .list-value { font-size: 14px; font-weight: 600; color: #333; }
        .list-icon { width: 24px; height: 24px; margin-right: 12px; }

        /* çŠ¶æ€å¤´ (Status Header) */
        .status-header {
            background: #f9f9f9; padding: 10px 16px; font-size: 12px; font-weight: 600; color: #555;
            text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 1px solid #eee;
        }

        /* æŒ‰é’®ç»„ */
        .btn-group { padding: 12px 16px; display: flex; flex-direction: column; gap: 8px; }
        .action-btn {
            width: 100%; padding: 12px; background: var(--hsbc-black); color: #fff;
            border: none; border-radius: 8px; font-size: 14px; font-weight: 600;
            cursor: pointer; text-align: center;
        }
        .action-btn.secondary { background: #fff; color: var(--hsbc-red); border: 1px solid var(--hsbc-red); }
        .action-btn:active { opacity: 0.8; }

        /* Animations */
        @keyframes fadeUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Face ID & Overlays */
        .overlay-modal {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); backdrop-filter: blur(4px);
            display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 200;
        }
        .overlay-modal.show { display: flex; }
        .overlay-box { background: white; padding: 24px; border-radius: 16px; text-align: center; width: 65%; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .overlay-icon { font-size: 32px; margin-bottom: 12px; display: block; }

        /* Notification */
        .push-notif {
            position: absolute; top: -100px; left: 12px; right: 12px;
            background: rgba(255,255,255,0.98); padding: 12px; border-radius: 14px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15); z-index: 150;
            display: flex; gap: 12px; transition: top 0.5s cubic-bezier(0.34, 1.56, 0.64, 1); cursor: pointer;
            color: #000;
        }
        .push-notif.show { top: 55px; }
        .notif-icon { width: 38px; height: 38px; border-radius: 8px; display:flex; align-items:center; justify-content:center; overflow: hidden; background: #fff; border: 1px solid #f0f0f0; flex-shrink: 0;}

        /* Control Bar */
        .control-bar { position: absolute; bottom: 0; left: 40px; right: calc(45% + 40px); padding: 15px 20px; background: #1e1e1e; border-top: 1px solid #333; display: flex; justify-content: space-between; }
        .ctrl-btn { padding: 10px 20px; background: #333; color: #fff; border: 1px solid #555; border-radius: 6px; cursor: pointer; transition: background 0.2s; }
        .ctrl-btn:hover { background: #444; }
        .ctrl-btn.primary { background: #c6a87c; color: #000; border: none; }
        .ctrl-btn.primary:hover { background: #d4b58b; }
        .ctrl-btn:disabled { opacity: 0.3; cursor: not-allowed; }

    </style>
</head>
<body>

<div class="story-panel" id="storyPanel">
    <div class="header-title">
        <span>æ±‡ä¸°å“è¶Šç†è´¢ (å¤§æ¹¾åŒº)</span>
        <span class="header-badge">AI PILOT</span>
    </div>
    </div>

<div class="device-stage">
    <div class="phone-frame">
        <div class="status-bar">
            <span>10:30</span>
            <span>ä¸­å›½ç§»åŠ¨</span>
        </div>
        <div class="notch"></div>

        <div class="chat-header">
            <div class="header-title-box">
                <div class="ht-main">å¤§æ¹¾åŒºç†è´¢é€šåŠ©æ‰‹</div>
                <div class="ht-sub"><div class="dot"></div> åœ¨çº¿</div>
            </div>
        </div>

        <div class="chat-body" id="chatBody">
            </div>

        <div class="input-area">
            <div class="rm-btn" title="è”ç³»å®¢æˆ·ç»ç†">
                <img src="resource/rm.jpeg" alt="RM">
                <div class="rm-badge"></div>
            </div>
            <div class="input-field">
                <span style="color:#ccc;">è¾“å…¥æ¶ˆæ¯...</span>
            </div>
            <div class="mic-icon">ğŸ¤</div>
        </div>

        <div class="push-notif" id="pushNotif" onclick="startScenario()">
            <div class="notif-icon"><img src="resource/IMG_1035.png" alt="HSBC Logo" style="width: 30px; height: 30px; object-fit: contain;"></div>
            <div style="flex:1">
                <div style="font-size:13px; font-weight:600; display:flex; justify-content:space-between; margin-bottom: 4px;">
                    <span>å¸‚åœºæé†’</span>
                    <span style="color:#888; font-weight:normal; font-size: 11px;">ç°åœ¨</span>
                </div>
                <div style="font-size:13px; line-height:1.4; color: #333;">
                    <strong>æ’ç”Ÿç§‘æŠ€æŒ‡æ•°å¤§æ¶¨ +4.2%</strong><br>æ‚¨çš„å¤§æ¹¾åŒºæŠ•èµ„æœºä¼šåˆ†æå·²å°±ç»ªã€‚
                </div>
            </div>
        </div>

        <div class="overlay-modal" id="faceIdModal">
            <div class="overlay-box">
                <div class="overlay-icon">Face ID</div>
                <div style="font-weight:600; margin-bottom:5px; color: #000;">èº«ä»½éªŒè¯</div>
                <div style="color:#888; font-size:13px;">ç¡®è®¤æäº¤è‡³ RM å¤æ ¸</div>
            </div>
        </div>

    </div>
</div>

<div class="control-bar">
    <button class="ctrl-btn" id="prevBtn" onclick="prevStep()" disabled>ä¸Šä¸€æ­¥</button>
    <button class="ctrl-btn primary" id="nextBtn" onclick="nextStep()">å¼€å§‹æ¼”ç¤º</button>
</div>

<script>
    // --- å‰§æœ¬æ•°æ® ---
    const scriptData = [
        {
            phase: "1. å”¤é†’ä¸ç—›ç‚¹",
            title: "å…¨åŸŸèµ„äº§è§†å›¾ (GBA One View)",
            desc: "Patrick çœ‹åˆ°æ¸¯è‚¡å¤§æ¶¨ï¼Œä½†èµ„é‡‘åœ¨å›½å†…ã€‚AI é€šè¿‡æ•´åˆä¸¤åœ°è´¦æˆ·è§†å›¾ï¼Œç›´è§‚å±•ç¤º'å›½å†…é—²ç½®ã€é¦™æ¸¯ç¼ºé’±'çš„èµ„é‡‘åˆ†å¸ƒç—›ç‚¹ã€‚",
            log: `> è§¦å‘: å¸‚åœºè¡Œæƒ… (æ’ç§‘æŒ‡ +4.2%)\n> å®¢æˆ·çŠ¶æ€: åŒé‡å“è¶Šç†è´¢ (CN/HK)\n> åŠ¨ä½œ: å±•ç¤º 'GBA èµ„äº§å…¨æ™¯å›¾'`,
            action: "show_welcome"
        },
        {
            phase: "2. åˆè§„å’¨è¯¢",
            title: "æ¶ˆé™¤è·¨å¢ƒç–‘è™‘",
            desc: "å®¢æˆ·æ‹…å¿ƒä¼ ç»Ÿç”µæ±‡çš„åˆè§„é£é™©ã€‚AI æ™ºèƒ½æ¨èå›½å®¶æ”¯æŒçš„'è·¨å¢ƒç†è´¢é€š-å—å‘é€š'ï¼Œå¼ºè°ƒå®˜æ–¹æ¸ é“å’Œèµ„é‡‘é—­ç¯ã€‚",
            log: `> ç”¨æˆ·æ„å›¾: è·¨å¢ƒè½¬è´¦å’¨è¯¢ (50ä¸‡ RMB)\n> é£é™©ç‚¹: å¤–æ±‡ç®¡åˆ¶æ‹…å¿§\n> æ–¹æ¡ˆ: æ¨è 'å—å‘é€š (WMC Southbound)'`,
            action: "user_ask_compliance"
        },
        {
            phase: "3. æ•°å­—åŒ–å¼€é€š",
            title: "æç®€èµ„æ ¼è®¤è¯",
            desc: "æ‰“ç ´'è·‘æŸœå°'çš„åˆ»æ¿å°è±¡ã€‚AI å¼•å¯¼å®¢æˆ·åœ¨çº¿å®Œæˆèµ„æ ¼è‡ªè¯å’Œè´¦æˆ·é…å¯¹ã€‚å¿…è¦æ—¶æä¾›äººå·¥ååŠ©é€‰é¡¹ã€‚",
            log: `> æµç¨‹: æ•°å­—åŒ– Onboarding\n> æ£€æŸ¥: å¤§æ¹¾åŒºç¤¾ä¿/èµ„äº§è¾¾æ ‡\n> é€‰é¡¹: å¢åŠ  'é¢„çº¦ RM' å¤‡é€‰`,
            action: "ai_setup_wmc"
        },
        {
            phase: "4. èµ„é‡‘åˆ’è½¬",
            title: "é—­ç¯èµ„é‡‘æµ",
            desc: "æ¨¡æ‹Ÿèµ„é‡‘ä»æ·±åœ³è´¦æˆ·åˆ’å…¥é¦™æ¸¯ä¸“æˆ·çš„è¿‡ç¨‹ã€‚æ— éœ€ç¹çç”¨é€”ç”³æŠ¥ï¼Œçªæ˜¾é—­ç¯ç®¡ç†çš„ä¾¿æ·æ€§ã€‚",
            log: `> äº¤æ˜“: èµ„é‡‘åˆ’è½¬ (CNY -> CNH)\n> é‡‘é¢: 500,000 RMB\n> çŠ¶æ€: é—­ç¯è´¦æˆ·å†…å®æ—¶åˆ°è´¦`,
            action: "execute_transfer"
        },
        {
            phase: "5. æŠ•èµ„å»ºè®®",
            title: "åˆè§„äº§å“è¾¹ç•Œ",
            desc: "çº æ­£'ç›´æ¥ç‚’è‚¡'çš„è¯¯åŒºï¼Œæ¨èåˆè§„çš„'å¤§ä¸­åç§‘æŠ€åŸºé‡‘'ã€‚æ—¢æ»¡è¶³äº†æŠ•èµ„æ–¹å‘ï¼Œåˆç¬¦åˆç›‘ç®¡è¦æ±‚ã€‚",
            log: `> è¾¹ç•Œæ§åˆ¶: æ‹¦æˆªä¸ªè‚¡äº¤æ˜“è¯·æ±‚\n> æ›¿ä»£æ–¹æ¡ˆ: æ¨èç§‘æŠ€ä¸»é¢˜äº’è®¤åŸºé‡‘\n> é£é™©ç­‰çº§: R4 (ä¸­é«˜é£é™©)`,
            action: "ai_product_rec"
        },
        {
            phase: "6. å®¡æ…æ‰§è¡Œ",
            title: "æäº¤ RM å¤æ ¸",
            desc: "å¯¹äºå¤§é¢æŠ•èµ„æŒ‡ä»¤ï¼Œä¸è¿›è¡Œå…¨è‡ªåŠ¨ä¸‹å•ï¼Œè€Œæ˜¯ç”Ÿæˆæ„å‘ä¹¦å¹¶è½¬äº¤ RM è·Ÿè¿›ï¼Œä½“ç°é“¶è¡Œçš„ä¸¥è°¨é£æ§ã€‚",
            log: `> åŠ¨ä½œ: æäº¤åŸºé‡‘è®¤è´­ç”³è¯·\n> é£æ§: Digital Handshake + RM Review\n> ç»“æœ: æµç¨‹é—­ç¯`,
            action: "execute_invest"
        }
    ];

    let currentStepIndex = -1;

    // --- æ§åˆ¶é€»è¾‘ ---
    function nextStep() {
        if (currentStepIndex < scriptData.length - 1) {
            currentStepIndex++;
            renderPanel(scriptData[currentStepIndex]);
            executeAction(scriptData[currentStepIndex].action);
            updateButtons();
        }
    }

    function prevStep() {
        if (currentStepIndex > 0) {
            document.getElementById('chatBody').innerHTML = '';
            let targetIndex = currentStepIndex - 1;
            currentStepIndex = -1;
            for(let i=0; i<=targetIndex; i++) {
                nextStep();
            }
        }
    }

    function updateButtons() {
        document.getElementById('prevBtn').disabled = currentStepIndex <= 0;
        document.getElementById('nextBtn').innerText = currentStepIndex >= scriptData.length - 1 ? "æ¼”ç¤ºç»“æŸ" : "ä¸‹ä¸€æ­¥";
    }

    function renderPanel(data) {
        const panel = document.getElementById('storyPanel');
        document.querySelectorAll('.scene-card').forEach(c => c.classList.remove('active'));
        
        const card = document.createElement('div');
        card.className = 'scene-card active';
        card.innerHTML = `
            <div class="scene-header">${data.phase}</div>
            <div class="scene-title">${data.title}</div>
            <div class="scene-desc">${data.desc}</div>
            <div class="system-log">${data.log.replace(/\n/g, '<br>')}</div>
        `;
        panel.prepend(card);
    }

    // --- æ¨¡æ‹Ÿå™¨åŠ¨ä½œ ---
    function executeAction(action) {
        if (action === "show_welcome") {
            // æ¨¡æ‹Ÿç‚¹å‡»æ¨é€è¿›å…¥
            setTimeout(() => document.getElementById('pushNotif').classList.add('show'), 500);
            setTimeout(() => {
                document.getElementById('pushNotif').classList.remove('show');
                addBubble('ai', "æ—©ä¸Šå¥½ï¼ŒPatrickã€‚æ’ç”Ÿç§‘æŠ€æŒ‡æ•°åå¼¹å¼ºåŠ²ã€‚è¿™æ˜¯æ‚¨ç›®å‰çš„å¤§æ¹¾åŒºèµ„äº§å…¨æ™¯è§†å›¾ï¼š");
                setTimeout(() => {
                    addWidget(`
                        <div class="native-card">
                            <div class="status-header">GBA å…¨åŸŸèµ„äº§è§†å›¾</div>
                            <div class="card-list-item">
                                <div class="list-main">
                                    <div class="list-title">ğŸ‡¨ğŸ‡³ æ±‡ä¸°ä¸­å›½ (æ·±åœ³)</div>
                                    <div class="list-sub">äººæ°‘å¸å‚¨è“„</div>
                                </div>
                                <div class="list-value">Â¥ 2,000,000</div>
                            </div>
                            <div class="card-list-item">
                                <div class="list-main">
                                    <div class="list-title">ğŸ‡­ğŸ‡° æ±‡ä¸°é¦™æ¸¯</div>
                                    <div class="list-sub">æ¸¯å¸å‚¨è“„</div>
                                </div>
                                <div class="list-value" style="color:#8e8e93;">HK$ 50,000</div>
                            </div>
                            <div style="padding:12px 16px; font-size:12px; color:#db0011; background:#fff;">
                                ğŸ’¡ æç¤ºï¼šæ‚¨åœ¨é¦™æ¸¯å¸‚åœºçš„æµåŠ¨æ€§è¾ƒä½ï¼Œå¯èƒ½é”™è¿‡è¡Œæƒ…ã€‚
                            </div>
                        </div>
                    `);
                }, 600);
            }, 2000);
        }
        else if (action === "user_ask_compliance") {
            addBubble('user', "æˆ‘æƒ³è½¬ 50ä¸‡äººæ°‘å¸å»é¦™æ¸¯ä¹°ç§‘æŠ€è‚¡ï¼Œç›´æ¥ç”µæ±‡ä¼šä¸ä¼šè¢«å¤–ç®¡å±€å¡ä½ï¼Ÿæˆ‘ä¸æƒ³æƒ¹åˆè§„éº»çƒ¦ã€‚");
            setTimeout(() => {
                addBubble('ai', "éå¸¸ç†è§£æ‚¨çš„é¡¾è™‘ã€‚ç›´æ¥ç”µæ±‡ç¡®å®ä¸»è¦ç”¨äºç•™å­¦ç­‰ç»å¸¸é¡¹ç›®ï¼Œä¸é€‚åˆæŠ•èµ„ã€‚");
                addBubble('ai', "ä½œä¸ºå¤§æ¹¾åŒºå±…æ°‘ï¼Œæ‚¨å®Œå…¨å¯ä»¥ä½¿ç”¨å®˜æ–¹æ”¯æŒçš„<strong>â€œè·¨å¢ƒç†è´¢é€š - å—å‘é€šâ€</strong>é€šé“ã€‚");
                addWidget(`
                    <div class="native-card">
                        <div class="status-header">å—å‘é€š (Southbound) ä¼˜åŠ¿</div>
                        <div class="card-list-item">
                            <div class="list-main">
                                <div class="list-title">âœ… å®˜æ–¹åˆè§„é€šé“</div>
                                <div class="list-sub">å›½å®¶æ”¿ç­–æ”¯æŒï¼Œèµ„é‡‘é“¾è·¯æ¸…æ™°</div>
                            </div>
                        </div>
                        <div class="card-list-item">
                            <div class="list-main">
                                <div class="list-title">âœ… é¢åº¦ç‹¬ç«‹</div>
                                <div class="list-sub">æ‹¥æœ‰ 300ä¸‡ ä¸“å±æŠ•èµ„é¢åº¦</div>
                            </div>
                        </div>
                        <div class="card-list-item">
                            <div class="list-main">
                                <div class="list-title">âœ… ä¸å è´­æ±‡é¢åº¦</div>
                                <div class="list-sub">ä¿ç•™æ‚¨æ¯å¹´ 5ä¸‡ç¾å…ƒ çš„ä¸ªäººé¢åº¦</div>
                            </div>
                        </div>
                    </div>
                `);
            }, 1000);
        }
        else if (action === "ai_setup_wmc") {
            addBubble('user', "å¬èµ·æ¥ä¸é”™ï¼Œä½†å¼€é€šæ˜¯ä¸æ˜¯å¾ˆéº»çƒ¦ï¼Ÿè¦å»é¦™æ¸¯æŸœå°å—ï¼Ÿ");
            setTimeout(() => {
                addBubble('ai', "é‚£æ˜¯æ—§æµç¨‹äº†ã€‚ç°åœ¨é€šè¿‡æ±‡ä¸° Appï¼Œæ‚¨å¯ä»¥å…¨æµç¨‹çº¿ä¸ŠåŠç†èµ„æ ¼è®¤è¯å’Œè´¦æˆ·é…å¯¹ã€‚");
                addWidget(`
                    <div class="native-card">
                        <div class="status-header">å—å‘é€šèµ„æ ¼é€ŸåŠ</div>
                        <div class="card-list-item">
                            <div class="list-main">
                                <div class="list-title">å¤§æ¹¾åŒºç¤¾ä¿/ç¨æ”¶æ ¡éªŒ</div>
                            </div>
                            <div class="list-value" style="color:var(--accent-green)">é€šè¿‡</div>
                        </div>
                        <div class="card-list-item">
                            <div class="list-main">
                                <div class="list-title">åŒè¾¹è´¦æˆ·è‡ªåŠ¨é…å¯¹</div>
                                <div class="list-sub">æ·±åœ³ç»“ç®—æˆ· â†” é¦™æ¸¯æŠ•èµ„æˆ·</div>
                            </div>
                            <div class="list-value" style="color:var(--accent-green)">å°±ç»ª</div>
                        </div>
                        <div class="btn-group">
                            <button class="action-btn" onclick="nextStep()">ç«‹å³å¼€é€š</button>
                            <button class="action-btn secondary">é¢„çº¦ RM ååŠ©åŠç†</button>
                        </div>
                    </div>
                `);
            }, 1000);
        }
        else if (action === "execute_transfer") {
            // æ¨¡æ‹Ÿèµ„é‡‘åˆ’è½¬ç•Œé¢
            addBubble('ai', "è´¦æˆ·é…å¯¹å·²å®Œæˆï¼ç°åœ¨æ‚¨å¯ä»¥è¿›è¡Œé—­ç¯èµ„é‡‘åˆ’è½¬ã€‚è¯¥èµ„é‡‘å°†ä¸“æ¬¾ä¸“ç”¨ï¼Œä»…ç”¨äºè´­ä¹°åˆè§„ç†è´¢äº§å“ã€‚");
            setTimeout(() => {
                addWidget(`
                    <div class="native-card">
                        <div class="status-header">èµ„é‡‘åˆ’è½¬ (é—­ç¯)</div>
                        <div class="card-list-item">
                            <div class="list-main">
                                <div class="list-title">è½¬å‡ºè´¦æˆ· (CN)</div>
                                <div class="list-sub">äººæ°‘å¸å‚¨è“„</div>
                            </div>
                            <div class="list-value">- Â¥500,000</div>
                        </div>
                        <div class="card-list-item">
                            <div class="list-main">
                                <div class="list-title">è½¬å…¥è´¦æˆ· (HK)</div>
                                <div class="list-sub">å—å‘é€šæŠ•èµ„ä¸“æˆ·</div>
                            </div>
                            <div class="list-value">+ Â¥500,000</div>
                        </div>
                        <div class="btn-group">
                            <button class="action-btn" onclick="nextStep()">ç¡®è®¤åˆ’è½¬</button>
                        </div>
                    </div>
                `);
            }, 800);
        }
        else if (action === "ai_product_rec") {
            addBubble('user', "é’±åˆ°äº†ã€‚æˆ‘ç°åœ¨èƒ½ç›´æ¥ä¹°è…¾è®¯æˆ–è€…ç¾å›¢çš„è‚¡ç¥¨å—ï¼Ÿ");
            setTimeout(() => {
                addBubble('ai', "éœ€è¦å‘æ‚¨è¯´æ˜ï¼š<strong>å—å‘é€šæš‚ä¸æ”¯æŒç›´æ¥ä¹°å–ä¸ªè‚¡</strong>ã€‚");
                addBubble('ai', "å»ºè®®æ‚¨é€šè¿‡<strong>â€œå¤§æ¹¾åŒºç§‘æŠ€ä¸»é¢˜åŸºé‡‘â€</strong>æ¥å¸ƒå±€ã€‚ç”±ä¸“ä¸šæœºæ„ç®¡ç†ï¼Œä¸ä»…åˆè§„ï¼Œè¿˜èƒ½åˆ†æ•£ä¸ªè‚¡é£é™©ã€‚");
                addWidget(`
                    <div class="native-card">
                        <div class="status-header">ä¸ºæ‚¨ç²¾é€‰ (å—å‘é€šåˆè§„)</div>
                        <div class="card-list-item">
                            <div class="list-main">
                                <div class="list-title">æ±‡ä¸°å¤§ä¸­åæ–°ç»æµåŸºé‡‘</div>
                                <div class="list-sub">ä¸»è¦æŠ•å‘ï¼šè…¾è®¯, ç¾å›¢, é˜¿é‡Œç­‰</div>
                            </div>
                        </div>
                        <div class="card-list-item">
                            <div class="list-main">
                                <div class="list-title">è¿‘ä¸€å¹´æ”¶ç›Š</div>
                            </div>
                            <div class="list-value" style="color:#db0011">+12.4%</div>
                        </div>
                        <div class="card-list-item">
                            <div class="list-main">
                                <div class="list-title">é£é™©ç­‰çº§</div>
                            </div>
                            <div class="list-value">R4 (ä¸­é«˜é£é™©)</div>
                        </div>
                    </div>
                `);
            }, 1200);
        }
        else if (action === "execute_invest") {
            addBubble('user', "å¥½ï¼Œé‚£å°±ä¹°è¿™ä¸ªåŸºé‡‘ï¼ŒæŠ•å…¥ 50ä¸‡ã€‚");
            setTimeout(() => {
                const modal = document.getElementById('faceIdModal');
                modal.classList.add('show');
                setTimeout(() => {
                    modal.classList.remove('show');
                    addBubble('ai', "<strong>è®¤è´­ç”³è¯·å·²å—ç†ã€‚</strong><br>é‰´äºè¿™æ˜¯ä¸€ç¬”è¾ƒå¤§çš„è·¨å¢ƒæŠ•èµ„ï¼Œæ‚¨çš„å®¢æˆ·ç»ç† <strong>David</strong> ä¼šåœ¨åå°è¿›è¡Œæœ€ç»ˆåˆè§„å¤æ ¸ï¼Œå¹¶åœ¨äº¤æ˜“å®Œæˆåé€šçŸ¥æ‚¨ã€‚<br><br>æ‚¨å¯ä»¥åœ¨â€œå…¨åŸŸèµ„äº§è§†å›¾â€ä¸­éšæ—¶æŸ¥çœ‹è¿™ç¬”æŠ•èµ„çš„è¡¨ç°ã€‚");
                }, 1500);
            }, 800);
        }
    }

    // --- è¾…åŠ©å‡½æ•° ---
    function addBubble(role, text, autoScroll = true) {
        const chat = document.getElementById('chatBody');
        const row = document.createElement('div');
        row.className = `bubble-row ${role}`;
        
        let html = '';
        if (role === 'ai') {
            html += `<div class="avatar"><img src="resource/IMG_1035.png"></div>`;
        }
        html += `<div class="bubble ${role}">${text}</div>`;
        
        row.innerHTML = html;
        chat.appendChild(row);
        
        if (autoScroll) {
            requestAnimationFrame(() => {
                chat.scrollTop = chat.scrollHeight;
            });
        }
    }

    function addWidget(html, autoScroll = true) {
        const chat = document.getElementById('chatBody');
        const row = document.createElement('div');
        row.className = `bubble-row ai`;
        row.innerHTML = `<div class="avatar"><img src="resource/IMG_1035.png"></div><div style="width: 85%">${html}</div>`;
        chat.appendChild(row);
        
        if (autoScroll) {
            requestAnimationFrame(() => {
                chat.scrollTop = chat.scrollHeight;
            });
        }
    }

    function startScenario() {
        document.getElementById('pushNotif').classList.remove('show');
        setTimeout(() => nextStep(), 500);
    }

</script>

</body>
</html>